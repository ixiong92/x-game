import{d as J,u as O,r as w,p as b,c as u,b as o,a as s,f as t,w as n,e as c,o as _,J as R,t as r,i as y,F as C,g as P,n as V,j as Y,L as q,l as K,M as Q,E as S,h as X,N as Z,_ as j}from"./index-G4hdZss8.js";import{G as g}from"./GameButton-BKIMR8Kj.js";import{G as h}from"./GameCard-CYKbrR5m.js";import{S as ss}from"./ParticleEffect.vue_vue_type_style_index_0_scoped_db33c9d5_lang-BasWhRSt.js";import{s as f,H as m}from"./touch-handler-DtA4rPka.js";const es={class:"user-center-container"},os={class:"user-center-content"},ts={class:"header"},as={class:"user-profile"},ls={class:"avatar-section"},ns={class:"avatar"},rs={class:"profile-info"},is={class:"info-item"},ds={class:"info-value"},cs={class:"info-item"},ps={class:"info-value"},us={class:"info-item"},_s={class:"info-value"},vs={class:"exp-bar"},gs={class:"exp-info"},fs={class:"progress-grid"},ms={class:"progress-item"},ks={class:"progress-info"},bs={class:"progress-value"},ys={class:"progress-item"},hs={class:"progress-info"},xs={class:"progress-value"},ws={class:"progress-item"},Cs={class:"progress-info"},Ps={class:"progress-value"},Vs={class:"progress-item"},Ss={class:"progress-info"},Bs={class:"progress-value"},Ms={class:"progress-item"},$s={class:"progress-info"},Ds={class:"progress-value"},Fs={class:"progress-item"},Es={class:"progress-info"},Us={class:"progress-value"},zs={class:"achievements-list"},Gs={class:"achievement-icon"},Ns={class:"achievement-info"},Ts={class:"achievement-name"},Ls={class:"achievement-desc"},Ws={key:0,class:"achievement-date"},Hs={key:0,class:"achievement-badge"},As={key:1,class:"achievement-lock"},Is={class:"action-buttons"},Js={class:"avatar-selector"},Os=["onClick"],Rs=J({__name:"UserCenter",setup(Ys){const B=X(),a=O(),v=w(!1),i=w({nickname:"",age:8,avatar:"👦"}),M=["👦","👧","🧒","👶","🐶","🐱","🐼","🐨","🦁","🐯","🦊","🐻"],x=b(()=>a.profile.level*1e3),$=b(()=>Math.min(100,a.profile.exp/x.value*100)),D=b(()=>{const d=a.learningProgress.totalCorrect+a.learningProgress.totalWrong;return d===0?0:Math.round(a.learningProgress.totalCorrect/d*100)}),F=d=>{const e=Math.floor(d/3600),p=Math.floor(d%3600/60);return e>0?`${e}小时${p}分钟`:`${p}分钟`},E=d=>{const e=new Date(d);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},U=()=>{f.play("select"),m.light(),B.back()},z=()=>{i.value={nickname:a.profile.nickname,age:a.profile.age,avatar:a.profile.avatar},v.value=!0,f.play("select"),m.light()},G=()=>{a.updateProfile(i.value),v.value=!1,f.play("correct"),m.success(),S.success("资料保存成功！")},N=async()=>{try{await Z.confirm("确定要清除所有数据吗？此操作不可恢复！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),a.resetProgress(),f.play("correct"),m.success(),S.success("数据已清除！")}catch{}};return(d,e)=>{const p=c("el-icon"),T=c("el-button"),L=c("el-progress"),W=c("el-input"),k=c("el-form-item"),H=c("el-input-number"),A=c("el-form"),I=c("el-dialog");return _(),u("div",es,[o(t(ss)),s("div",os,[s("div",ts,[o(T,{circle:"",size:"large",onClick:U},{default:n(()=>[o(p,null,{default:n(()=>[o(t(R))]),_:1})]),_:1}),e[4]||(e[4]=s("h1",{class:"page-title"},"用户中心",-1)),e[5]||(e[5]=s("div",{style:{width:"40px"}},null,-1))]),o(t(h),{class:"user-info-card",shadow:"always"},{default:n(()=>[s("div",as,[s("div",ls,[s("div",ns,r(t(a).profile.avatar),1),o(t(g),{type:"primary",size:"small",onClick:z},{default:n(()=>[...e[6]||(e[6]=[y(" 编辑资料 ",-1)])]),_:1})]),s("div",rs,[s("div",is,[e[7]||(e[7]=s("span",{class:"info-label"},"昵称",-1)),s("span",ds,r(t(a).profile.nickname),1)]),s("div",cs,[e[8]||(e[8]=s("span",{class:"info-label"},"年龄",-1)),s("span",ps,r(t(a).profile.age)+"岁",1)]),s("div",us,[e[9]||(e[9]=s("span",{class:"info-label"},"等级",-1)),s("span",_s,"Lv."+r(t(a).profile.level),1)])]),s("div",vs,[s("div",gs,[e[10]||(e[10]=s("span",null,"经验值",-1)),s("span",null,r(t(a).profile.exp)+"/"+r(x.value),1)]),o(L,{percentage:$.value,"stroke-width":12,"show-text":!1},null,8,["percentage"])])])]),_:1}),o(t(h),{title:"学习进度",shadow:"always"},{default:n(()=>[s("div",fs,[s("div",ms,[e[12]||(e[12]=s("div",{class:"progress-icon"},"🎮",-1)),s("div",ks,[e[11]||(e[11]=s("span",{class:"progress-label"},"游戏次数",-1)),s("span",bs,r(t(a).learningProgress.totalGames),1)])]),s("div",ys,[e[14]||(e[14]=s("div",{class:"progress-icon"},"✓",-1)),s("div",hs,[e[13]||(e[13]=s("span",{class:"progress-label"},"正确题数",-1)),s("span",xs,r(t(a).learningProgress.totalCorrect),1)])]),s("div",ws,[e[16]||(e[16]=s("div",{class:"progress-icon"},"✗",-1)),s("div",Cs,[e[15]||(e[15]=s("span",{class:"progress-label"},"错误题数",-1)),s("span",Ps,r(t(a).learningProgress.totalWrong),1)])]),s("div",Vs,[e[18]||(e[18]=s("div",{class:"progress-icon"},"📊",-1)),s("div",Ss,[e[17]||(e[17]=s("span",{class:"progress-label"},"正确率",-1)),s("span",Bs,r(D.value)+"%",1)])]),s("div",Ms,[e[20]||(e[20]=s("div",{class:"progress-icon"},"⏱",-1)),s("div",$s,[e[19]||(e[19]=s("span",{class:"progress-label"},"学习时长",-1)),s("span",Ds,r(F(t(a).learningProgress.totalTime)),1)])]),s("div",Fs,[e[22]||(e[22]=s("div",{class:"progress-icon"},"⭐",-1)),s("div",Es,[e[21]||(e[21]=s("span",{class:"progress-label"},"最高分",-1)),s("span",Us,r(t(a).learningProgress.bestScore),1)])])])]),_:1}),o(t(h),{title:"我的成就",shadow:"always"},{default:n(()=>[s("div",zs,[(_(!0),u(C,null,P(t(a).achievements,l=>(_(),u("div",{key:l.id,class:V(["achievement-item",{"achievement-locked":!l.unlocked}])},[s("div",Gs,r(l.icon),1),s("div",Ns,[s("div",Ts,r(l.name),1),s("div",Ls,r(l.description),1),l.unlocked?(_(),u("div",Ws," 解锁于 "+r(E(l.unlockedAt)),1)):Y("",!0)]),l.unlocked?(_(),u("div",Hs,[o(p,{color:"#FFD700"},{default:n(()=>[o(t(q))]),_:1})])):(_(),u("div",As,[o(p,null,{default:n(()=>[o(t(K))]),_:1})]))],2))),128))])]),_:1}),s("div",Is,[o(t(g),{type:"warning",size:"large",block:"",onClick:N},{default:n(()=>[o(p,null,{default:n(()=>[o(t(Q))]),_:1}),e[23]||(e[23]=s("span",null,"清除数据",-1))]),_:1})])]),o(I,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=l=>v.value=l),title:"编辑资料",width:"90%",style:{maxWidth:"500px"}},{footer:n(()=>[o(t(g),{onClick:e[2]||(e[2]=l=>v.value=!1)},{default:n(()=>[...e[24]||(e[24]=[y("取消",-1)])]),_:1}),o(t(g),{type:"primary",onClick:G},{default:n(()=>[...e[25]||(e[25]=[y("保存",-1)])]),_:1})]),default:n(()=>[o(A,{model:i.value,"label-position":"top",size:"large"},{default:n(()=>[o(k,{label:"昵称"},{default:n(()=>[o(W,{modelValue:i.value.nickname,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value.nickname=l),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),o(k,{label:"年龄"},{default:n(()=>[o(H,{modelValue:i.value.age,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value.age=l),min:3,max:18,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),o(k,{label:"头像"},{default:n(()=>[s("div",Js,[(_(),u(C,null,P(M,l=>s("div",{key:l,class:V(["avatar-option",{"avatar-selected":i.value.avatar===l}]),onClick:qs=>i.value.avatar=l},r(l),11,Os)),64))])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),se=j(Rs,[["__scopeId","data-v-966742e8"]]);export{se as default};
