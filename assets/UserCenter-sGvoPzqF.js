import{d as O,u as R,r as w,p as y,c as _,b as t,a as s,f as l,C as Y,j as C,w as n,e as c,o as p,J as q,t as r,i as b,F as V,g as B,n as S,L as K,l as Q,M as X,E as M,h as Z,N as j,_ as ss}from"./index-J8i9tB8A.js";import{G as f}from"./GameButton-BwWB8KzV.js";import{G as h}from"./GameCard-FCkXvoNR.js";import{S as es}from"./ParticleEffect.vue_vue_type_style_index_0_scoped_0f834ed3_lang-C1xJ9BwO.js";import{s as m,H as g}from"./touch-handler-DtA4rPka.js";const os={class:"user-center-container"},ts={class:"user-center-content"},ls={class:"header"},as={class:"user-profile"},ns={class:"avatar-section"},rs={class:"avatar"},is={class:"profile-info"},ds={class:"info-item"},cs={class:"info-value"},ps={class:"info-item"},us={class:"info-value"},_s={class:"info-item"},vs={class:"info-value"},fs={class:"exp-bar"},ms={class:"exp-info"},gs={class:"progress-grid"},ks={class:"progress-item"},ys={class:"progress-info"},bs={class:"progress-value"},hs={class:"progress-item"},xs={class:"progress-info"},ws={class:"progress-value"},Cs={class:"progress-item"},Vs={class:"progress-info"},Bs={class:"progress-value"},Ss={class:"progress-item"},Ms={class:"progress-info"},$s={class:"progress-value"},Ds={class:"progress-item"},Fs={class:"progress-info"},Es={class:"progress-value"},Us={class:"progress-item"},zs={class:"progress-info"},Gs={class:"progress-value"},Ns={class:"achievements-list"},Ps={class:"achievement-icon"},Ts={class:"achievement-info"},Ls={class:"achievement-name"},Ws={class:"achievement-desc"},Hs={key:0,class:"achievement-date"},As={key:0,class:"achievement-badge"},Is={key:1,class:"achievement-lock"},Js={class:"action-buttons"},Os={class:"avatar-selector"},Rs=["onClick"],Ys=O({__name:"UserCenter",setup(qs){const $=Z(),o=R(),v=w(!1),d=w({nickname:"",age:8,avatar:"👦"}),D=["👦","👧","🧒","👶","🐶","🐱","🐼","🐨","🦁","🐯","🦊","🐻"],x=y(()=>{var i;return(i=o.profile)!=null&&i.level?o.profile.level*1e3:1e3}),F=y(()=>o.profile?Math.min(100,o.profile.exp/x.value*100):0),E=y(()=>{const i=o.progress.totalCorrect+o.progress.totalWrong;return i===0?0:Math.round(o.progress.totalCorrect/i*100)}),U=i=>{const e=Math.floor(i/3600),u=Math.floor(i%3600/60);return e>0?`${e}小时${u}分钟`:`${u}分钟`},z=i=>{const e=new Date(i);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},G=()=>{m.play("select"),g.light(),$.back()},N=()=>{o.profile&&(d.value={nickname:o.profile.nickname,age:o.profile.age,avatar:o.profile.avatar},v.value=!0,m.play("select"),g.light())},P=()=>{o.updateProfile(d.value),v.value=!1,m.play("correct"),g.success(),M.success("资料保存成功！")},T=async()=>{try{await j.confirm("确定要清除所有数据吗？此操作不可恢复！","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),o.resetProgress(),m.play("correct"),g.success(),M.success("数据已清除！")}catch{}};return(i,e)=>{const u=c("el-icon"),L=c("el-button"),W=c("el-progress"),H=c("el-input"),k=c("el-form-item"),A=c("el-input-number"),I=c("el-form"),J=c("el-dialog");return p(),_("div",os,[t(l(es)),s("div",ts,[s("div",ls,[t(L,{circle:"",size:"large",onClick:G},{default:n(()=>[t(u,null,{default:n(()=>[t(l(q))]),_:1})]),_:1}),e[4]||(e[4]=s("h1",{class:"page-title"},"用户中心",-1)),e[5]||(e[5]=s("div",{style:{width:"40px"}},null,-1))]),l(o).profile?(p(),Y(l(h),{key:0,class:"user-info-card",shadow:"always"},{default:n(()=>[s("div",as,[s("div",ns,[s("div",rs,r(l(o).profile.avatar),1),t(l(f),{type:"primary",size:"small",onClick:N},{default:n(()=>[...e[6]||(e[6]=[b(" 编辑资料 ",-1)])]),_:1})]),s("div",is,[s("div",ds,[e[7]||(e[7]=s("span",{class:"info-label"},"昵称",-1)),s("span",cs,r(l(o).profile.nickname),1)]),s("div",ps,[e[8]||(e[8]=s("span",{class:"info-label"},"年龄",-1)),s("span",us,r(l(o).profile.age)+"岁",1)]),s("div",_s,[e[9]||(e[9]=s("span",{class:"info-label"},"等级",-1)),s("span",vs,"Lv."+r(l(o).profile.level),1)])]),s("div",fs,[s("div",ms,[e[10]||(e[10]=s("span",null,"经验值",-1)),s("span",null,r(l(o).profile.exp)+"/"+r(x.value),1)]),t(W,{percentage:F.value,"stroke-width":12,"show-text":!1},null,8,["percentage"])])])]),_:1})):C("",!0),t(l(h),{title:"学习进度",shadow:"always"},{default:n(()=>[s("div",gs,[s("div",ks,[e[12]||(e[12]=s("div",{class:"progress-icon"},"🎮",-1)),s("div",ys,[e[11]||(e[11]=s("span",{class:"progress-label"},"游戏次数",-1)),s("span",bs,r(l(o).progress.totalGames),1)])]),s("div",hs,[e[14]||(e[14]=s("div",{class:"progress-icon"},"✓",-1)),s("div",xs,[e[13]||(e[13]=s("span",{class:"progress-label"},"正确题数",-1)),s("span",ws,r(l(o).progress.totalCorrect),1)])]),s("div",Cs,[e[16]||(e[16]=s("div",{class:"progress-icon"},"✗",-1)),s("div",Vs,[e[15]||(e[15]=s("span",{class:"progress-label"},"错误题数",-1)),s("span",Bs,r(l(o).progress.totalWrong),1)])]),s("div",Ss,[e[18]||(e[18]=s("div",{class:"progress-icon"},"📊",-1)),s("div",Ms,[e[17]||(e[17]=s("span",{class:"progress-label"},"正确率",-1)),s("span",$s,r(E.value)+"%",1)])]),s("div",Ds,[e[20]||(e[20]=s("div",{class:"progress-icon"},"⏱",-1)),s("div",Fs,[e[19]||(e[19]=s("span",{class:"progress-label"},"学习时长",-1)),s("span",Es,r(U(l(o).progress.totalTime)),1)])]),s("div",Us,[e[22]||(e[22]=s("div",{class:"progress-icon"},"⭐",-1)),s("div",zs,[e[21]||(e[21]=s("span",{class:"progress-label"},"最高分",-1)),s("span",Gs,r(l(o).progress.bestScore),1)])])])]),_:1}),t(l(h),{title:"我的成就",shadow:"always"},{default:n(()=>[s("div",Ns,[(p(!0),_(V,null,B(l(o).achievements,a=>(p(),_("div",{key:a.id,class:S(["achievement-item",{"achievement-locked":!a.unlocked}])},[s("div",Ps,r(a.icon),1),s("div",Ts,[s("div",Ls,r(a.name),1),s("div",Ws,r(a.description),1),a.unlocked?(p(),_("div",Hs," 解锁于 "+r(z(a.unlockedAt)),1)):C("",!0)]),a.unlocked?(p(),_("div",As,[t(u,{color:"#FFD700"},{default:n(()=>[t(l(K))]),_:1})])):(p(),_("div",Is,[t(u,null,{default:n(()=>[t(l(Q))]),_:1})]))],2))),128))])]),_:1}),s("div",Js,[t(l(f),{type:"warning",size:"large",block:"",onClick:T},{default:n(()=>[t(u,null,{default:n(()=>[t(l(X))]),_:1}),e[23]||(e[23]=s("span",null,"清除数据",-1))]),_:1})])]),t(J,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value=a),title:"编辑资料",width:"90%",style:{maxWidth:"500px"}},{footer:n(()=>[t(l(f),{onClick:e[2]||(e[2]=a=>v.value=!1)},{default:n(()=>[...e[24]||(e[24]=[b("取消",-1)])]),_:1}),t(l(f),{type:"primary",onClick:P},{default:n(()=>[...e[25]||(e[25]=[b("保存",-1)])]),_:1})]),default:n(()=>[t(I,{model:d.value,"label-position":"top",size:"large"},{default:n(()=>[t(k,{label:"昵称"},{default:n(()=>[t(H,{modelValue:d.value.nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.nickname=a),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),t(k,{label:"年龄"},{default:n(()=>[t(A,{modelValue:d.value.age,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.age=a),min:3,max:18,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(k,{label:"头像"},{default:n(()=>[s("div",Os,[(p(),_(V,null,B(D,a=>s("div",{key:a,class:S(["avatar-option",{"avatar-selected":d.value.avatar===a}]),onClick:Ks=>d.value.avatar=a},r(a),11,Rs)),64))])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ee=ss(Ys,[["__scopeId","data-v-ec377c80"]]);export{ee as default};
